# 要件定義書

## プロジェクト概要

- **タイトル**：MAUI Blazor + FluentUI で厚労省準拠ストレスチェックアプリ
- **目的**：厚労省準拠のストレスチェック（23/57/80/120項目対応）をWebアプリ化し、セルフケアや職場改善に活用する
- **ターゲット**：Web（GitHub Pages）、将来的にAndroid/iOSも対応
- **多言語対応**：日本語・英語

## 画面構成

### 初回のみ表示される画面
- 言語選択画面
  - 日本語 / 英語 の選択

### Home（開始画面）
- 簡単な説明
- 注意事項
- 開始ボタン
- 開始する内容選択
  - 23項目、57項目、80項目、120項目（有効なもののみ選択肢表示。1つだけなら自動選択）
  - 各項目の簡単な説明と所要時間を表示
  - 個人事業主向けの暫定版も選択肢に追加（将来的に拡張）

### 回答ページ
- 選択したストレスチェック項目数に応じた質問ページ（例：27項目など）
- FluentUIのWizardコンポーネントを利用し、複数ページに分割して表示
  - 1ページあたり5～10問ずつ
  - ステップ形式で進捗状況を表示
  - 戻る・進むボタンでページ遷移
  - 進捗バーやステップインジケーターで現在位置を明示
  - 途中保存や中断にも対応

### 結果ページ
- ストレスチェックの結果表示
- 厚労省準拠のグラフ表示
- アドバイスやセルフケアの案内

### Results（履歴一覧）
- 過去のストレスチェック履歴一覧
  - 開く
  - 削除
  - 修正（必要に応じて）

### Exports（エクスポート）
- 個人情報の入力
  - 氏名、社員番号、内線番号、メールアドレス など
- to QR
  - 個人情報を入力するとボタンが有効化
  - QRコードを生成・表示し、職場の母艦端末で読み取り可能
- to CSV
  - CSVファイルで保存（SJIS形式）
- Send to Server（LAN内）
  - CSVファイルをLAN内サーバーへ送信

### Settings（設定）
- URLの引数で渡された場合はそれを優先
- 言語の選択
- 使用するストレスチェック項目の選択

### Help（ヘルプ）
- このソフトウェアについて
- フィードバック

## 主な機能

- 厚労省準拠のストレスチェック（23/57/80/120項目）
- 結果のグラフ表示（厚労省資料準拠）
- IndexedDBによるローカル保存
- 外部連携：QRコード生成、CSV出力、REST API送信（JSON形式、CSVと同内容）
- 起動引数による設定（言語、項目数、送信先IPアドレス等／任意・未指定時は初期値や設定画面の値を使用）
- FluentUIによるUI

## データ設計

- **IndexedDB**
  - StressCheckResults（ID、言語、チェック項目数、回答データ、スコア、送信先IP、作成日時）
  - Settings（言語、チェック項目数、送信先IP）

## 外部連携仕様

- **CSV出力**：厚労省準拠フォーマット
- **REST API送信**：
  - エンドポイント：`http://{IPアドレス}/api/stresscheck`
  - メソッド：POST
  - ボディ：CSVと同内容をJSON形式で送信

## 開発工数見積

- プロジェクト初期設定：1人日
- 画面実装：3人日
- ロジック実装：4人日
- テスト・デバッグ：2人日
- **合計：10人日**

## フェーズ・リリース方針

1. 23項目ストレスチェック
2. 57項目ストレスチェック
3. 80項目ストレスチェック
4. 120項目ストレスチェック

## 未確定事項・TODO

- グラフの詳細仕様（厚労省資料の具体的な参照箇所）
- REST APIの認証方式
- エラーハンドリング方針
- 多言語対応の範囲（今後他言語追加の可能性）

## 参考資料

- [厚生労働省 ストレスチェック制度 導入マニュアル](https://www.mhlw.go.jp/bunya/roudoukijun/anzeneisei12/pdf/150709-1.pdf)
- [厚生労働省 職業性ストレス簡易調査票（設問・判定方法）](https://www.mhlw.go.jp/content/000533925.pdf) 
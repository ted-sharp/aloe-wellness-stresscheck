---
description: main rules
globs: 
alwaysApply: true
---
# ルールの目的
このルールは、プロジェクト全体での知識の蓄積と共有を目的としています。ユーザーとのやり取りで得られた知見を適切に管理し、実装の一貫性を保つことを目指します。

# 具体的な要件

## 1. ナレッジの蓄積
- 条件: ユーザーとの追加のやり取りで新しい指示や実装に関する知見が得られた場合
- アクション: `./doc`ディレクトリ内の適切なファイルに記録
- 期待される結果: 知識の体系的な蓄積と再利用

## 2. ドキュメントの参照
- 条件: 実装や判断に必要な情報がある場合
- アクション: `./doc`ディレクトリから適切な情報を参照
- 要件: 参照したファイルのパスを必ず明示

## 3. 実装の一貫性
- 条件: ユーザーからの指摘が既存の実装と異なる場合
- アクション: 指摘内容と実装結果を記録
- 期待される結果: 実装の一貫性の維持と改善

# ルールの検証
- [ ] 新しい知見が得られた場合、`./doc`に記録されているか
- [ ] 参照したファイルのパスが明示されているか
- [ ] 実装の一貫性が保たれているか

# ルール違反時の対応
1. ナレッジが記録されていない場合
   - 即座に`./doc`に記録
   - 関連するファイルを特定
   - 記録内容を確認

2. ファイルパスが明示されていない場合
   - 参照したファイルのパスを追記
   - 関連するコンテキストを提供

# 適用例

## 良い例
```markdown
# ユーザーからの指摘
- ファイルパス: ./doc/feedback/2024-03-21.md
- 指摘内容: パフォーマンスの最適化が必要
- 対応結果: 実装を最適化し、./doc/optimization/performance.mdに記録
```

## 悪い例
```markdown
# ユーザーからの指摘
- 指摘内容: パフォーマンスの最適化が必要
- 対応結果: 実装を最適化（記録なし）
```

# 依存ルール
- 01-documentation.mdc: ドキュメントの記録方法
- 02-implementation.mdc: 実装の一貫性に関するルール

# 関連ルール
- 03-code-review.mdc: コードレビューのガイドライン
